<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>
      畫個星星，容易么！ | 
      DouO's Blog
    </title>
    <meta name="author" content="DouO">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
    
    <!-- Le styles -->
<link href='/moon-2013/assets/stylesheets/bootstrap.min-93b47f97c3444c4711853ed5140d82a1.css' type='text/css' rel='stylesheet' media='all'>
<link href='/moon-2013/assets/stylesheets/bootstrap-responsive.min-6be942c8ec424a44aa4f31e099bae1fc.css' type='text/css' rel='stylesheet' media='all'>
<link href='/moon-2013/assets/stylesheets/toc-24de7073de5e84bbdf82d581655967fa.css' type='text/css' rel='stylesheet' media='all'>
<link href='/moon-2013/assets/stylesheets/style-2a78e0c366d18704c93f8db7772659c6.css' type='text/css' rel='stylesheet' media='all'>
<link href='/moon-2013/assets/stylesheets/widgets/google_prettify/moon-a586c0c53856bb03a2050ca5121629fe.css' type='text/css' rel='stylesheet' media='all'>    

    <!-- script -->
<script src='/moon-2013/assets/javascripts/jquery-1.8.2.min-cfa9051cc0b05eb519f1e16b2a6645d7.js'></script>
<script src='/moon-2013/assets/javascripts/bootstrap.min-240e44e4195f0836ced0eab636f9cb0c.js'></script>
<script src='/moon-2013/assets/javascripts/front-9bcae9460ba6dd25c936b7bdc47a9998.js'></script>
<script src='/moon-2013/assets/javascripts/jquery.c.min-e08fd6c1881afcf509255ce8b8f9b32b.js'></script>
<script src='/moon-2013/assets/javascripts/jquery.smooth-scroll.min-5caac1be39aee89977e39f82d14f0e08.js'></script>    
    
	

<script src="/moon-2013/assets/widgets/lazyload/javascripts/jquery.lazyload.min.js"></script>
    <!-- lazyload -->
    <script type="text/javascript">
      jQuery(document).ready(function($){
      if (navigator.platform == "iPad") return;
      jQuery("img.lazy").not(".cycle img").lazyload({
      effect:"fadeIn",
      placeholder: "/moon-2013/assets/media/ajax-loader.gif"
      });
      });
    </script>
   

    
<!-- Add mousewheel plugin (this is optional) -->
<script type="text/javascript" src="//cdn.staticfile.org/jquery-mousewheel/3.1.3/jquery.mousewheel.min.js"></script>


<!-- Add fancyBox -->
<link rel="stylesheet" href="/moon-2013/assets/widgets/fancybox/stylesheets/jquery.fancybox.css" type="text/css" media="screen" />
<script src="/moon-2013/assets/widgets/fancybox/javascripts/jquery.fancybox.pack.js"></script>

<!-- Optionally add helpers - button, thumbnail and/or media -->

<!-- <link rel="stylesheet" href="/fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen" />
<script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.6"></script>

<link rel="stylesheet" href="/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen" />
<script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script> -->


<script type="text/javascript">
      $(document).ready(function() {
      $(".fancybox").fancybox();
      });
    </script>
   


    <link rel="shortcut icon" href="/moon-2013/assets/media/favicon.ico">
    <!-- Le fav and touch icons -->
    <!-- Update these with your own images
	 <link rel="shortcut icon" href="images/favicon.ico">
	 <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	 <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	 <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	 -->
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-12243999-3']);
  _gaq.push(['_trackPageview']);
  

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


    <!-- processing -->
    
<script type="text/javascript"
  src="http://cdn.staticfile.org/processing.js/1.4.1/processing.min.js">
</script>

  </head>
  <body>
    <div class="container">
      <div class="row-fluid">
	<div class="span2 hidden-phone"></div>
	<div class="span8">
	  <header class="header pull-left">
	    <h1>畫個星星，容易么！</h1>
	  </header>
  	  <button type="button" class="btn btn-navbar pull-right" data-toggle="collapse" data-target=".nav-collapse">
	    <span class="icon-bar"></span>
	    <span class="icon-bar"></span>
	    <span class="icon-bar"></span>
	    </button>
	</div> <!-- header -->

         </div>
      <div class="row-fluid">
	<div class="span2 hidden-phone"></div>
	<div class="span8 content">
	  <div class="nav-wrapper nav-collapse collapse"   data-spy="affix" data-offset-top="70" >
	    <nav class="nav moon-nav-list">
	      <ul>
	        <li><a href="/" rel="tooltip" data-placement="top" title="主頁">home</a></li>
	        <li><a href="/archives" rel="tooltip" data-placement="top" title="文章歸檔">archives</a></li>
	        <li><a href="/notes" rel="tooltip" data-placement="top" title="我的個人筆記">notes</a></li>
	        <li><a href="/rss.xml" rel="tooltip" data-placement="top" title="訂閱">feed</a></li>
	        <li><a href="/about" rel="tooltip" data-placement="top" title="關於我">about</a></li>
	        <li  class="separate"></li>
	        <li> 
	  	<a class="meta-nav next" href="/moon-2013/2009/12/17/bestjobs-report-from-careercast">
	  	  <span>←<br></span>时下最好职业,软件工程师排名第五
	  	</a>
	        </li>
	        <li>
	  	<a class="meta-nav previous" href="/moon-2013/2009/11/19/foo-w7shell">
	  	  Foobar2000的win7界面整合插件<span><br>→</span>
	  	</a>
	        </li>
	      </ul>
	    </nav>
	  </div>
	  
	      <article class="post box">
<ul class="category-label">
<li><a href="/moon-2013/categories#coder-ref" class="coder">coder</a></li>
</ul>
<div class="cf"></div>


<p>今天在看《Filthy Rich
Clients》时看到一个画星星的程序片段，忽然就打算看自己能不能写出这个程序来。最初以为没有难度，到真正写起来又不知如何下手，无奈就在纸上画起了图。嗖嗖，半个小时过去了，基本上有了想法，先把星星尖角的点算出来再说。这个不就是圆内接正多边形的接点吗，我的想法很直接，就是先给一个初始点，然后作圆心到这个点的线段，然后把线绕圆点转按一定的角度，得到的新线段的点就是星星新的尖角。如此循环直到所有星星的点出来为止。说的不明白，上图先：</p>

<p><img class="lazy img-polaroid display" src="http://www.dourok.info/wp-content/uploads/2009/11/star1.png" title="星星"  alt="星星"></p>

<p>OK，准备动手写，可线段这么旋转呢，既然说自己写就不能用<a href="http://zh.wikipedia.org/zh-cn/%E6%97%8B%E8%BD%AC%E7%9F%A9%E9%98%B5" title="">AffineTransform</a>了。无奈又在纸上嗖嗖画了起来，良久，终于发现我对三角函数的认识退步到a=sin(a)*c的水平。最后还是用我这个水平逼出一条等式出来，但我居然单纯地以为两条线都是在第一象限中，出来的图形自然乱七八糟。这时彷佛陷入绝境了，突然灵光一现记起有个东西叫<a href="http://zh.wikipedia.org/zh-cn/%E5%90%91%E9%87%8F" title="">向量</a>，向量是什么东西我还是知道的，但那些运算法则都忘光光了。在我那堆书里翻了翻找到一本有几页讲向量的书，这是一部关于游戏人工智能的书，里面对向量的介绍仅仅是概念上的层面。不过点乘的介绍还是给我带来曙光。立刻上维基，里面对向量还真简洁，不过数量积、向量积的内容还是挺可观的，看了许久感觉没什么帮助，又转战三角函数页面，基本把各个恒等式跟定理都回忆了一遍。期间还手贱点了某网站，看了不少八卦新闻。回过神来才发现整个晚上的时间都快没了，可这条线段怎么旋转貌似还没找到解决办法？就在把尘封多年的十年高考拿出来之际，一个名词又在脑海中浮现——极坐标。马上上维基</p>

<p>一看心里暗爽。</p>

<p><img class="lazy img-polaroid display" src="http://upload.wikimedia.org/math/e/a/7/ea7a6289be3041b5e39d73cd28d49cdf.png" title="图片来源：维基百科"  alt=""></p>

<p><img class="lazy img-polaroid display" src="http://upload.wikimedia.org/math/3/3/0/330403e92948365fda100bf469f66654.png" title="图片来源：维基百科"  alt=""></p>

<p>我要的不就是这两条式子吗，如今怎么简洁的摆在眼前怎么能不兴奋。什么线段旋转啊都不用。直接就可以求出旋转后的点。这里再仔细说明一下一个圆内接的n角星星的尖角点就是这个圆的内接正n边形的接点，而圆的内接正多边形的内角是相等，且内接正n边形每条边对应的圆心角都等于360°，这个角度也就是星星中相邻的两个点旋转的角度，为了方便我也把它称为这个星星的圆心角。那么现在求星星的尖角点也就很简单了，给出一个圆，一个初始点，然后依次加上圆心角并代入公式，就可求出所有点了。但是就算把所有尖角点连起来也就是个正多边形，星星在哪里呢？其中我在第一次嗖嗖地画图时就发现，画一个完美的星星其实就是一个大圆的内接n边形和另一小一点的同心圆的内接n边形，两个内接n边形的角度偏转是它的边对应的圆心角的一半，然后依次把每个顶点连接起来就OK了。好像又是不明不白的表述，再上图：</p>

<p><img class="lazy img-polaroid display" src="http://www.dourok.info/wp-content/uploads/2009/11/star2.png" title="两个正多边形"  alt="两个正多边形"> <img class="lazy img-polaroid display" src="http://www.dourok.info/wp-content/uploads/2009/11/star3.png" title="BlueStar"  alt="BlueStar"></p>

<p><img class="lazy img-polaroid display" src="http://www.dourok.info/wp-content/uploads/2009/11/star41.png" title="star"  alt="star"></p>

<p>既然如此一个内接多边形已经出来了，离星星还会远吗？于是乎我就嗖嗖地编起了代码。</p>

<p>Java语言: <a href="http://fayaa.com/code/view/8207/" title="">一個生成星星形狀的GeneralPath方法</a></p>
<pre><code class="Java">/**
     * 一個生成星星形狀的GeneralPath的方法
     * @param x0 星星外接圓的圓心
     * @param y0 星星外接圓的圓心
     * @param r 外接圓的半徑
     * @param v 這個怎么這么說呢，決定星星的胖瘦吧，取值(0,1)
     * @param baseRadian 決定星星的角度，弧度來的
     * @param branchescount 星星的角數
     * @return
     */
    public static GeneralPath justStar(double x0,double y0,double r,double v,double baseRadian,int branchescount){

        double d = 2*Math.PI/branchescount;
        double [][] p = new double[branchescount*2][2];
        for(int i = 0; i&lt;p.length ;i++){

            p[i][0]=x0+r*Math.cos(i/2*d+baseRadian);p[i][1]=y0+r*Math.sin(i/2*d+baseRadian);
            i++;
            p[i][0]=x0+v*r*Math.cos((i/2+0.5)*d+baseRadian);p[i][1]=y0+v*r*Math.sin((i/2+0.5)*d+baseRadian);
        }
        GeneralPath path  = new GeneralPath();
        path.moveTo(p[0][0], p[0][1]);

        for(int i=1 ; i&lt;p.length ;i++){
            path.lineTo(p[i][0], p[i][1]);
        }
        path.closePath();
        return path;
    }
</code></pre>
<p>到此总算告一段落了，整整一个晚上都在画星星，好像小学生。能聊以安慰的是总算复习了一下向量跟三角函数，这下应该能记住一段时间了。突然想起有次校内的ACM比赛有道水题，考的是用<a href="http://zh.wikipedia.org/wiki/%E6%B5%B7%E4%BC%A6%E5%85%AC%E5%BC%8F" title="">海伦公式</a>求三角形面积，我居然把海伦公式给忘了，并为此推导许久，还推不出来。赛后我就暗下决心一定要把海伦公式记住，想不到现在又想不起来了。杯具啊，觉得再写一遍</p>
<script type="math/tex; mode=display">
        p=（a+b+c）/2；

        </script><script type="math/tex; mode=display">
        S = \sqrt{p(p-a)(p-b)(p-c)}

        </script>
<p>一定要把它记住。</p>

<p>确实，才发觉有些东西要写出来才印象深刻，于是乎就有了这篇文章，不过不用又会很快忘记。</p>

<div class="footer">
  <ul class="tag_box inline">
  <li><a href="/moon-2013/tags#java2d-ref">java2d</a></li>
  </ul>
  <span class="date">
  2009-11-21
  </span>
</div>
</article>


<div class="box">
  <div class="plus">
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<g:plusone></g:plusone>
    <!-- JiaThis Button BEGIN -->
<div class="jiathis_style"><span class="jiathis_txt">分享到：</span>
<a class="jiathis_button_qzone"></a>
<a class="jiathis_button_tsina"></a>
<a class="jiathis_button_tqq"></a>
<a class="jiathis_button_renren"></a>
<a class="jiathis_button_kaixin001"></a>
<a href="http://www.jiathis.com/share?uid=1677096" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
var jiathis_config={
	data_track_clickback:true,
	hideMore:false
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1677096" charset="utf-8"></script>
<!-- JiaThis Button END -->
	

  </div>
    <div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_developer = 1;
	var disqus_title = '畫個星星，容易么！';

	var disqus_identifier ='756 http://dourok.info/?p=756';

	var disqus_shortname = 'doousblog';
	
	var disqus_url = 'https://douo.github.io/moon-2013/2009/11/21/draw-a-star';
	
	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>

<noscript>
	Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<!-- disqus end-->

 </div>

	      </div>  <!-- content -->
      </div>  <!-- row -->
      <div class="row-fluid">
	<div class="span2 hidden-phone"></div>
	<div class="span8">
	  <footer class="statement">
	    <small class＝"copyright">&copy;2009-2013  |</small>
	    <small class= "power">基於 <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>
	      和 <a href="http://twitter.github.com/bootstrap/"
	  	  target="_blank">Twitter Bootstrap</a> <a href="/diary"><img src="/moon-2013/assets/media/broken_heart.png"></img></a></small>
	    <small class="license">
	      <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh"><img title="知识共享许可协议" style="border-width: 0px; vertical-align: middle; display: inline; " src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" original="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png"></a>		
	    </small>
	  </footer>
	  
	      </div>
      </div>
	
	
<script type="text/javascript">
   $(function(){
   $(window).scroll(function(){  //只要窗口滚动,就触发下面代码 
   var scrollt = document.documentElement.scrollTop + document.body.scrollTop; //获取滚动后的高度 
   if( scrollt >200 ){  //判断滚动后高度超过200px,就显示  
	$("#gotop").fadeIn(400); //淡出     
	}else{      
	$("#gotop").stop().fadeOut(400); //如果返回或者没有超过,就淡入.必须加上stop()停止之前动画,否则会出现闪动   
	}
	});
	$("#gotop").click(function(){ //当点击标签的时候,使用animate在200毫秒的时间内,滚到顶部
	$("html,body").animate({scrollTop:"0px"},200);
	});
	});
</script>
<a id="gotop" href="#">   
	<span>▲</span> 
</a>
    </div> <!-- /container -->
    
    <!-- Google Prettify -->
<script src="http://cdn.staticfile.org/prettify/r298/prettify.min.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>
<!-- end Google Prettify -->
  </body>

</html>
