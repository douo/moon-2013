<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>
      如何用Mercurial开始GoogleCode项目 | 
      DouO's Blog
    </title>
    <meta name="author" content="DouO">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
    
    <!-- Le styles -->
<link href='/assets/stylesheets/bootstrap.min-93b47f97c3444c4711853ed5140d82a1.css' type='text/css' rel='stylesheet' media='all'>
<link href='/assets/stylesheets/bootstrap-responsive.min-6be942c8ec424a44aa4f31e099bae1fc.css' type='text/css' rel='stylesheet' media='all'>
<link href='/assets/stylesheets/toc-24de7073de5e84bbdf82d581655967fa.css' type='text/css' rel='stylesheet' media='all'>
<link href='/assets/stylesheets/style-2a78e0c366d18704c93f8db7772659c6.css' type='text/css' rel='stylesheet' media='all'>
<link href='/assets/stylesheets/widgets/google_prettify/moon-a586c0c53856bb03a2050ca5121629fe.css' type='text/css' rel='stylesheet' media='all'>    

    <!-- script -->
<script src='/assets/javascripts/jquery-1.8.2.min-cfa9051cc0b05eb519f1e16b2a6645d7.js'></script>
<script src='/assets/javascripts/bootstrap.min-240e44e4195f0836ced0eab636f9cb0c.js'></script>
<script src='/assets/javascripts/front-9bcae9460ba6dd25c936b7bdc47a9998.js'></script>
<script src='/assets/javascripts/jquery.c.min-e08fd6c1881afcf509255ce8b8f9b32b.js'></script>
<script src='/assets/javascripts/jquery.smooth-scroll.min-5caac1be39aee89977e39f82d14f0e08.js'></script>    
    
	

<script src="/assets/widgets/lazyload/javascripts/jquery.lazyload.min.js"></script>
    <!-- lazyload -->
    <script type="text/javascript">
      jQuery(document).ready(function($){
      if (navigator.platform == "iPad") return;
      jQuery("img.lazy").not(".cycle img").lazyload({
      effect:"fadeIn",
      placeholder: "/assets/media/ajax-loader.gif"
      });
      });
    </script>
   

    
<!-- Add mousewheel plugin (this is optional) -->
<script type="text/javascript" src="//cdn.staticfile.org/jquery-mousewheel/3.1.3/jquery.mousewheel.min.js"></script>


<!-- Add fancyBox -->
<link rel="stylesheet" href="/assets/widgets/fancybox/stylesheets/jquery.fancybox.css" type="text/css" media="screen" />
<script src="/assets/widgets/fancybox/javascripts/jquery.fancybox.pack.js"></script>

<!-- Optionally add helpers - button, thumbnail and/or media -->

<!-- <link rel="stylesheet" href="/fancybox/source/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen" />
<script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.6"></script>

<link rel="stylesheet" href="/fancybox/source/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen" />
<script type="text/javascript" src="/fancybox/source/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script> -->


<script type="text/javascript">
      $(document).ready(function() {
      $(".fancybox").fancybox();
      });
    </script>
   


    <link rel="shortcut icon" href="/assets/media/favicon.ico">
    <!-- Le fav and touch icons -->
    <!-- Update these with your own images
	 <link rel="shortcut icon" href="images/favicon.ico">
	 <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	 <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	 <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	 -->
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-12243999-3']);
  _gaq.push(['_trackPageview']);
  

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>


    <!-- processing -->
    
<script type="text/javascript"
  src="http://cdn.staticfile.org/processing.js/1.4.1/processing.min.js">
</script>

  </head>
  <body>
    <div class="container">
      <div class="row-fluid">
	<div class="span2 hidden-phone"></div>
	<div class="span8">
	  <header class="header pull-left">
	    <h1>如何用Mercurial开始GoogleCode项目</h1>
	  </header>
  	  <button type="button" class="btn btn-navbar pull-right" data-toggle="collapse" data-target=".nav-collapse">
	    <span class="icon-bar"></span>
	    <span class="icon-bar"></span>
	    <span class="icon-bar"></span>
	    </button>
	</div> <!-- header -->

         </div>
      <div class="row-fluid">
	<div class="span2 hidden-phone"></div>
	<div class="span8 content">
	  <div class="nav-wrapper nav-collapse collapse"   data-spy="affix" data-offset-top="70" >
	    <nav class="nav moon-nav-list">
	      <ul>
	        <li><a href="/" rel="tooltip" data-placement="top" title="主頁">home</a></li>
	        <li><a href="/archives" rel="tooltip" data-placement="top" title="文章歸檔">archives</a></li>
	        <li><a href="/notes" rel="tooltip" data-placement="top" title="我的個人筆記">notes</a></li>
	        <li><a href="/rss.xml" rel="tooltip" data-placement="top" title="訂閱">feed</a></li>
	        <li><a href="/about" rel="tooltip" data-placement="top" title="關於我">about</a></li>
	        <li  class="separate"></li>
	        <li> 
	  	<a class="meta-nav next" href="/2011/05/24/update-css">
	  	  <span>←<br></span>更新了下CSS
	  	</a>
	        </li>
	        <li>
	  	<a class="meta-nav previous" href="/2011/05/09/im-back">
	  	  I'm Back!<span><br>→</span>
	  	</a>
	        </li>
	      </ul>
	    </nav>
	  </div>
	  
	      <article class="post box">
<ul class="category-label">
<li><a href="/categories#otaku-ref" class="otaku">otaku</a></li>
</ul>
<div class="cf"></div>
<div class="cf"></div><div id="toc_container" class="toc_wrap_right toc_black no_bullets" ><p class="toc_title">目录</p><ul class="toc_list">
     <li><a href="#toc_0">安装Mercurial</a>
     <ul>
     </ul>
     </li>
     
     <li><a href="#toc_1">设置默认用户</a>
     <ul>
     </ul>
     </li>
     
     <li><a href="#toc_2">创建项目</a>
     <ul>
     </ul>
     </li>
     
     <li><a href="#toc_3">不想每次提交都打地址？</a>
     <ul>
     </ul>
     </li>
     
     <li><a href="#toc_4">SVN转到Mercurial</a>
     <ul>
     </ul>
     </li>
     
</div>


<p>最近打算对自己乱糟糟的代码整理规划下，把一些项目提交到在线的代码仓库。因为自己还算是一个windows用户，所以还是放弃github，选择google
code
加上看起来比较好用的Mercurial（<a href="http://www.cnblogs.com/greenmile/archive/2010/04/20/VCS.html" title="">CVS，GIT，Mercurial和SVN比较</a>），Netbeans对Mercurial也有很好的支持。</p>

<p>Mercurial用起来还是很方便的，见<a href="http://blog.dreasgrech.com/2010/07/managing-google-code-project-with.html" title="">Managing a Google Code project with
Mercurial</a>。下面的内容就是翻译整理自这文章，权当记录一下。</p>
<h3 id="toc_0">安装Mercurial</h3>
<p>首先，需要在你的机器上安装Mercurial，从这里 <a href="http://mercurial.selenic.com/downloads/">http://mercurial.selenic.com/downloads/</a>  选择适合自己系统的版本下载安装。Ubuntu用户可以直接<code>sudo apt-get install mercurial</code>。搞定后，打开命令行窗口，键入<code>hg version</code>，如果出现类似下面信息的话就OK了。</p>
<pre><code class="">分布式软件配置管理工具 - 水银 (版本 1.7.5)
(see http://mercurial.selenic.com for more information)
</code></pre>
<p>Copyright (C) 2005-2010 Matt Mackall and others
This is free software; see the source for copying conditions. There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.`</p>

<p>找不到命令的话请检查下环境变量。</p>
<h3 id="toc_1">设置默认用户</h3>
<p>当Mercurial成功安装后，还需要设置一个用户作为你提交到仓库的默认用户。
windows用户的话，需要在用户目录（%USERPROFILE%）创建一个名为Mercurial.ini或者.hgrc的配置文件。比如创建<code>C:\Users\Andreas\Mercurial.ini</code>
Linux在\$HOME目录创建.hgrc文件 然后在创建好的文件里加上下面内容</p>
<pre><code class="">[ui]
username = 你的名字 &lt;你的邮箱&gt;
</code></pre>
<p>可以在<a href="http://www.selenic.com/mercurial/hgrc.5.html" title="">这里</a>找到配置文件的更多选项。</p>
<h3 id="toc_2">创建项目</h3>
<p>点这个链接<a href="http://code.google.com/hosting/createProject" title="">Google Project
Hosting</a>创建新项目，记得在版本控制工具（Version
control
system）选项上选择Mercurial。填完其他项目后就可以创建自己的项目主页了。你的项目大概如：<a href="http://code.google.com/p/myhgproject/%E3%80%82">http://code.google.com/p/myhgproject/。</a>
接下来需要先建立本地仓库（repository），再把所有东西提交到在线仓库。首先，打开项目主页下的source标签页，或者这个地址<a href="http://code.google.com/p/myhgproject/source/checkout">http://code.google.com/p/myhgproject/source/checkout</a>
然后复制页面上的命令： <code>hg clone https://myhgproject.googlecode.com/hg/ myhgproject</code>
在本地电脑上打开命令行窗口，进入到想要放着项目的文件夹如~/myproject，执行上面的命令。这个命令将会添加一个在线仓库的副本到本地机器上。这时应该在~/myproject下可以看到Mercurial创建的文件夹myhgproject。现在里面只有个.hg文件夹，接下来就可以把准备提交的项目文件复制到myhgproject下。</p>

<p>现在myhgproject文件夹下已经有项目需要的所有文件夹了，再接下来就要把这些文件添加到本地仓库中，命令行窗口进入myhgproject，执行hg
add，如果有新文件的话就会看到一堆anding xxx的信息。hg add
命令的作用就是把新文件标记为要添加到下一次要提交的仓库中(新添加的文件状态就会由?变为a，可用hg
status查看)，所以接下来就是把这些文件提交到本地仓库中， 使用命令：
<code>hg commit -m 「Initial commit」</code> -m
后面的参数是指你这次提交的的一些信息。比如，现在是第一次添加，所以可以说明Initial
commit来说明是第一次提交的意思。</p>

<p>注意，到现在本地的代码还未提交到在线仓库。接下来才是要把本地的代码提交到在线仓库，不过首先你要知道你的google为你生成的
googlecode.com密码.在项目的source页面下可以看到这个链接：<a href="http://code.google.com/hosting/settings" title="">http://code.google.com/hosting/settings</a>。现在就可以使用你的google用户名和这个密码提交更改到在线仓库了。比如用户名是andreas，密码是AbCdEfGHiJ12。可以用这个命令提交：
<code>hg push https://andreas:AbCdEfGHiJ12@myhgproject.googlecode.com/hg/</code>
现在应该可以在在线仓库看到你项目的所有文件了。以后每次做更改后想要提交都需要先提交到本地仓库，用这个命令：
<code>hg commit -m &quot;这次提交的一些信息&quot;</code> 也可以不加-m这个参数。如果要添加新文件的话记得先
<code>hg add</code> 然后就可以继续这个命令提交到在线仓库
<code>hg push https://andreas:AbCdEfGHiJ12@myhgproject.googlecode.com/hg/</code></p>
<h3 id="toc_3">不想每次提交都打地址？</h3>
<p>没问题，其实可以直接键入 <code>hg push</code>
不过服务器会要求你输入密码，输入上面的密码后才可以成功提交。如果连密码也不想输，也可以。
打开项目文件夹了的.hg文件夹，可以看到里面有个hgrc文件，如果没有的话也可以自己创建。
在里面加入你的密码</p>
<pre><code class="">[paths]
default = https://andreas:AbCdEfGHiJ12@myhgproject.googlecode.com/hg/
</code></pre>
<p>明文保存的，要小心密码被泄露。</p>
<h3 id="toc_4">SVN转到Mercurial</h3>
<p>可以参考这里<a href="http://leeiio.me/googlecode-converting-svn-to-hg/" title="">在Google Code上用 Mercurial 取代 Subversion
管理你的项目</a>，我也没细看。</p>

<p>知道hg就是汞Hg吧 :lol:</p>

<div class="footer">
  <ul class="tag_box inline">
  <li><a href="/tags#google-ref">google</a></li>
  <li><a href="/tags#Google Code-ref">Google Code</a></li>
  <li><a href="/tags#hg-ref">hg</a></li>
  <li><a href="/tags#Mercurial-ref">Mercurial</a></li>
  </ul>
  <span class="date">
  2011-05-11
  </span>
</div>
</article>


<div class="box">
  <div class="plus">
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
<g:plusone></g:plusone>
    <!-- JiaThis Button BEGIN -->
<div class="jiathis_style"><span class="jiathis_txt">分享到：</span>
<a class="jiathis_button_qzone"></a>
<a class="jiathis_button_tsina"></a>
<a class="jiathis_button_tqq"></a>
<a class="jiathis_button_renren"></a>
<a class="jiathis_button_kaixin001"></a>
<a href="http://www.jiathis.com/share?uid=1677096" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
var jiathis_config={
	data_track_clickback:true,
	hideMore:false
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1677096" charset="utf-8"></script>
<!-- JiaThis Button END -->
	

  </div>
    <div id="disqus_thread"></div>
<script type="text/javascript">
	var disqus_developer = 1;
	var disqus_title = '如何用Mercurial开始GoogleCode项目';

	var disqus_identifier ='489 http://dourok.info/?p=489';

	var disqus_shortname = 'doousblog';
	
	var disqus_url = 'https://douo.github.io/moon-2013//2011/05/11/managing-google-code-project-with-mercurial';
	
	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>

<noscript>
	Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<!-- disqus end-->

 </div>

	      </div>  <!-- content -->
      </div>  <!-- row -->
      <div class="row-fluid">
	<div class="span2 hidden-phone"></div>
	<div class="span8">
	  <footer class="statement">
	    <small class＝"copyright">&copy;2009-2013  |</small>
	    <small class= "power">基於 <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a>
	      和 <a href="http://twitter.github.com/bootstrap/"
	  	  target="_blank">Twitter Bootstrap</a> <a href="/diary"><img src="/assets/media/broken_heart.png"></img></a></small>
	    <small class="license">
	      <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh"><img title="知识共享许可协议" style="border-width: 0px; vertical-align: middle; display: inline; " src="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png" original="http://i.creativecommons.org/l/by-nc-sa/3.0/80x15.png"></a>		
	    </small>
	  </footer>
	  
	      </div>
      </div>
	
	
<script type="text/javascript">
   $(function(){
   $(window).scroll(function(){  //只要窗口滚动,就触发下面代码 
   var scrollt = document.documentElement.scrollTop + document.body.scrollTop; //获取滚动后的高度 
   if( scrollt >200 ){  //判断滚动后高度超过200px,就显示  
	$("#gotop").fadeIn(400); //淡出     
	}else{      
	$("#gotop").stop().fadeOut(400); //如果返回或者没有超过,就淡入.必须加上stop()停止之前动画,否则会出现闪动   
	}
	});
	$("#gotop").click(function(){ //当点击标签的时候,使用animate在200毫秒的时间内,滚到顶部
	$("html,body").animate({scrollTop:"0px"},200);
	});
	});
</script>
<a id="gotop" href="#">   
	<span>▲</span> 
</a>
    </div> <!-- /container -->
    
    <!-- Google Prettify -->
<script src="http://cdn.staticfile.org/prettify/r298/prettify.min.js"></script>
<script>
  var pres = document.getElementsByTagName("pre");
  for (var i=0; i < pres.length; ++i) {
    pres[i].className = "prettyprint linenums";
  }
  prettyPrint();
</script>
<!-- end Google Prettify -->
  </body>

</html>
